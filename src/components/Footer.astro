---
import { Image } from "astro:assets";
import bgImage from "@/assets/havana-footer.png";
import { SOCIALS } from "@/lib/info";
---

<footer class="bg-blue relative overflow-hidden">
  <div
    class="flex flex-wrap items-center justify-center gap-4 text-white md:mt-12 md:mb-8"
  >
    {
      SOCIALS.map((social) => (
        <a
          href={social.url}
          target="_blank"
          rel="noopener noreferrer"
          aria-label={social.name}
          class="transition-transform duration-300 hover:scale-110"
        >
          <social.image.logo class="h-8 w-8" />
        </a>
      ))
    }
  </div>
  <div class="w-full pb-12 text-center text-xs text-white">
    <p>
      &copy; 2025 ICPC Final Caribe√±a
      <br />
      Todos los derechos reservados
    </p>
  </div>
  <Image
    src={bgImage}
    alt="City Background"
    class="footer-image h-full w-full object-cover object-center"
  />
  <div class="overlay absolute right-0 bottom-0 z-10 h-20 w-full"></div>
</footer>

<style>
  .overlay {
    background: linear-gradient(180deg, transparent 0%, var(--color-blue) 100%);
  }
  @keyframes footerSlideUp {
    0% {
      transform: translateY(50px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .footer-image {
    opacity: 0;
    transform: translateY(50px);
  }

  .footer-image.animate {
    animation: footerSlideUp 0.8s ease-out forwards;
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const img = entry.target.querySelector(".footer-image");
          if (img) {
            img.classList.add("animate");
          }
        }
      });
    },
    { threshold: 0.1 },
  );

  const footer = document.querySelector("footer");
  if (footer) {
    observer.observe(footer);
  }
</script>
