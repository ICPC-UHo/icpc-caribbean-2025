---
import { Image } from "astro:assets";
import bgImage from "@/assets/havana-footer.png";
---

<footer class="relative overflow-hidden">
  <Image
    src={bgImage}
    alt="City Background"
    class="footer-image h-full w-full object-cover object-center"
  />
  <div class="overlay absolute right-0 bottom-0 z-10 h-20 w-full"></div>
</footer>

<style>
  .overlay {
    background: linear-gradient(180deg, transparent 0%, var(--color-blue) 100%);
  }
  @keyframes footerSlideUp {
    0% {
      transform: translateY(50px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .footer-image {
    opacity: 0;
    transform: translateY(50px);
  }

  .footer-image.animate {
    animation: footerSlideUp 0.8s ease-out forwards;
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const img = entry.target.querySelector(".footer-image");
          if (img) {
            img.classList.add("animate");
          }
        }
      });
    },
    { threshold: 0.1 },
  );

  const footer = document.querySelector("footer");
  if (footer) {
    observer.observe(footer);
  }
</script>
